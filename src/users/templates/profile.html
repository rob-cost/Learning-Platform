{% extends "base.html" %} {% block title %}Profile Page{% endblock %}
<!-- leave it -->
{% block content%}
<nav class="navbar">
  <div class="navbar-logo">Learning-Platform ({{username}})</div>

  <div class="navbar-links">
    <a href="{% url 'homepage' %}">Home</a>
    <a href="{% url 'profile_settings' %}">Profile</a>
    <form method="post" action="{% url 'logout' %}" style="display: inline">
      {% csrf_token %}
      <button type="submit">Logout</button>
    </form>
  </div>
</nav>

<div class="profile-container">
  <div class="sidebar">
    {% if messages %}
    <div class="messages">
      {% for message in messages %}
      <div class="alert alert-{{ message.tags }}">{{ message }}</div>
      {% endfor %}
    </div>
    {% endif %}

    <div class="profile-section">
      <h2>Subject</h2>
      <p>{{ profile.get_chosen_subject_display }}</p>
    </div>

    <div class="profile-section">
      <h2>Level</h2>
      <p><strong>Difficulty:</strong> {{ profile.difficulty_level }}</p>
      <p><strong>Assessment Score:</strong> {{ profile.assessment_score }}%</p>

      <a href="{% url 'retake_assessment' %}" class="retake-btn"
        >Retake Assessment</a
      >
    </div>
    <div class="profile-section">
      <h2>Learning Progress</h2>
      <p>{{ completed_lessons }} of {{ total_lessons }} lessons completed</p>
      <div class="progress-bar">
        <div
          class="progress-fill"
          style="--width: {{ progress_percentage }}%"
        ></div>
      </div>
      <p>{{ progress_percentage }}% completed</p>
    </div>
  </div>

  <div class="main-content">
    <div class="profile-section">
      <h2>Topics</h2>
      {% if topics %} {% for topic in topics %}
      <a
        href="{% url 'topic_detail' topic.id %}"
        class="topic-card {% if topic.is_completed %}completed {% elif topic.has_all_lessons %}all-lessons{% endif %}"
      >
        <div class="topic-title">{{ topic.topic_name }}</div>
        <div class="topic-description">{{ topic.description }}</div>
      </a>
      {% endfor %} {% else %}
      <p>No topics available yet. Please complete your assessment.</p>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
